# 分布式服务框架

这是一个基于 Actor 模型的分布式服务框架，服务之间通过消息进行数据传递。

框架特点：
- 服务默认单线程运行，支持多线程扩展。
- 结构灵活、模块化，便于开发和维护。

> 感谢 [github.com/duanhf2012/origin](https://github.com/duanhf2012/origin) 大佬提供的开源项目。本框架参考了其设计理念,做了一些适合自己项目的优化。

---

## 框架结构

本框架由以下三部分组成：

1. **Node（节点）**  
   每个节点对应一个独立进程，可以运行多个服务。

2. **Service（服务）**  
   每个服务是一个 Actor，以协程形式运行，支持多线程执行。服务由若干模块组成。

3. **Module（模块）**  
   模块是最小的业务单元，依附于服务运行，负责实现具体功能。

---

## 集群功能

1. **集群管理**  
   每个节点内置集群模块，用于发现和管理注册到集群中的服务。

2. **服务注册与发现**
    - 所有实现 `RPC` 开头接口的服务，都会自动注册到集群中。
    - 服务注册与发现通过 `etcd` 实现（还未做成接口,后续再说）。

3. **远程调用**
    - 基于 `rpcx` 实现跨节点远程调用。

### 版本说明:
目前为第一版,后续慢慢补充
````
已经完成的内容:
1. 节点、服务、模块封装
2. 集群管理
3. 配置管理
4. 定时器
5. 日志(支持自定义日志时间粒度和自动切分粒度的配置,过期自动删除日志的配置)
6. pprof
````

### 使用说明
````
详细使用,请查看example文件夹的使用示例
````
---

### 可使用的环境变量
````
TODO
````
---

### 后续规划:
````
1. 集群认证机制
2. 服务健康监控
3. 服务的限流策略
4. 更加模块化的设计,将大部分的底层内容做成插件,可以自由扩展和配置使用
5. 增加服务热更新的功能
6. 日志的异步模式,包括输出扩展(自定义输出器,目前实际是有的,只是没有暴露出来,也没有办法动态更新)
````